<div class="cards-grid">
  {% for item in include.content %}
    <article class="card card--{{ item.layout | default: 'left' }}">
      {% if item.layout == 'left' %}
        <!-- Research/Publication card with image on left -->
        <div class="card__inner">
          {% assign has_image = item.title | contains: '<img' %}
          {% if has_image %}
            <div class="card__media">
              {{ item.title }}
            </div>
          {% endif %}
          <div class="card__content">
            <div class="card__body">
              {{ item.description | strip | markdownify }}
            </div>
            {%- if item.sub_title -%}
              <p class="card__subtitle">{{ item.sub_title }}</p>
            {%- endif -%}
            {%- if item.caption -%}
              <p class="card__caption">{{ item.caption }}</p>
            {%- endif -%}
            {%- if item.quote -%}
              <p class="card__date">{{ item.quote }}</p>
            {%- endif -%}
            {%- if item.link -%}
              <a href="{{ item.link }}" class="card__link" target="_blank" rel="noopener">
                {%- if item.link_text -%}{{ item.link_text }}{%- else -%}Learn more{%- endif -%}
                <i class="fas fa-external-link-alt"></i>
              </a>
            {%- endif -%}
          </div>
        </div>

      {% elsif item.layout == 'divider' %}
        <!-- Subsection divider -->
        <div class="card__inner">
          <div class="card__header">
            <h4 class="card__title">{{ item.title }}</h4>
          </div>
        </div>

      {% elsif item.layout == 'top-middle' %}
        <!-- Education card - timeline style -->
        <div class="timeline-card">
          <div class="timeline-card__marker"></div>
          <div class="timeline-card__content">
            <h3 class="timeline-card__title">{{ item.title }}</h3>
            {%- if item.sub_title -%}
              <p class="timeline-card__subtitle">{{ item.sub_title }}</p>
            {%- endif -%}
            {%- if item.caption -%}
              <p class="timeline-card__institution">{{ item.caption }}</p>
            {%- endif -%}
            {%- if item.quote -%}
              <span class="timeline-card__date">{{ item.quote }}</span>
            {%- endif -%}
            {%- if item.description -%}
              <div class="timeline-card__description">
                {{ item.description | strip | markdownify }}
              </div>
            {%- endif -%}
          </div>
        </div>

      {% else %}
        <!-- Default card layout -->
        <div class="card__inner">
          {% assign has_image = item.title | contains: '<img' %}
          {% if has_image %}
            <div class="card__media">
              {{ item.title }}
            </div>
          {% else %}
            <div class="card__header">
              <h3 class="card__title">{{ item.title }}</h3>
            </div>
          {% endif %}
          <div class="card__content">
            {%- if item.sub_title -%}
              <p class="card__subtitle">{{ item.sub_title }}</p>
            {%- endif -%}
            {%- if item.caption -%}
              <p class="card__caption">{{ item.caption }}</p>
            {%- endif -%}
            {%- if item.quote -%}
              <p class="card__quote">{{ item.quote }}</p>
            {%- endif -%}
            {%- if item.description -%}
              <div class="card__body">
                {{ item.description | strip | markdownify }}
              </div>
            {%- endif -%}
            {%- if item.link -%}
              <a href="{{ item.link }}" class="card__link" target="_blank" rel="noopener">
                {%- if item.link_text -%}{{ item.link_text }}{%- else -%}Learn more{%- endif -%}
                <i class="fas fa-external-link-alt"></i>
              </a>
            {%- endif -%}
          </div>
        </div>
      {% endif %}
    </article>
  {% endfor %}
</div>
